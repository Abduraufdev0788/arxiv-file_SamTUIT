<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>SamTUIT | Talabalar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-gradient {
            background: linear-gradient(135deg, #0f4c81 0%, #1565a3 50%, #0b6cb8 100%);
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900">

<!-- ================= NAVBAR ================= -->
<nav class="bg-white sticky top-0 z-50 border-b shadow-sm">
    <div class="max-w-7xl mx-auto px-6 h-16 flex justify-between items-center">

        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-700 rounded-xl flex items-center justify-center text-white font-black">
                S
            </div>
            <span class="font-black text-blue-700">SamTUIT</span>
        </div>

        <!-- Desktop menu -->
        <div class="hidden md:flex gap-6 font-semibold text-slate-600">
            <a href="{% url 'user:user_home' %}" class="hover:text-blue-700">Asosiy</a>
            <a href="{% url 'qarorlar:qarorlar_bosh' %}" class="hover:text-blue-700">Qarorlar</a>
            <a href="{% url 'user:bmi' %}" class="hover:text-blue-700">Bitiruv ishlari</a>
            <a href="#" class="text-blue-700 border-b-2 border-blue-700">Talabalar</a>
            <a href="{% url 'user:xodimlar' %}" class="hover:text-blue-700">Xodimlar</a>
            <a href="{% url 'user:professors' %}" class="hover:text-blue-700">Professorlar</a>
            <a href="#" class="hover:text-blue-700">Bog‚Äòlanish</a>
        </div>

        <!-- Mobile button -->
        <button onclick="toggleMenu()" class="md:hidden text-2xl font-black">‚ò∞</button>
    </div>

    <!-- Mobile menu -->
    <div id="mobileMenu" class="hidden md:hidden bg-white border-t px-6 py-4 space-y-3 font-semibold">
            <a href="{% url 'user:user_home' %}" class="block">Asosiy</a>
            <a href="{% url 'qarorlar:qarorlar_bosh' %}" class="block">Qarorlar</a>
            <a href="{% url 'user:bmi' %}" class="block">Bitiruv ishlari</a>
            <a href="{% url "user:talabalar" %}" class="text-blue-700 border-b-2 border-blue-700">Talabalar</a>
            <a href="{% url 'user:xodimlar' %}" class="block">Xodimlar</a>
            <a href="{% url 'user:professors' %}" class="block">Professorlar</a>
            <a href="#" class="block">Bog‚Äòlanish</a>
    </div>
</nav>

<!-- ================= HERO ================= -->
<section class="hero-gradient text-white py-16 text-center">
    <h1 class="text-4xl font-black mb-3">Talabalar ro‚Äòyxati</h1>
    <p class="text-blue-100">Filialda tahsil olayotgan talabalar</p>
</section>

<!-- ================= FILTER ================= -->
<section class="max-w-7xl mx-auto px-6 -mt-10 relative z-10">
    <form method="get"
          class="bg-white rounded-2xl shadow-xl p-6 grid grid-cols-1 md:grid-cols-5 gap-4">

        <input type="text" name="full_name" value="{{ filters.full_name }}"
               placeholder="F.I.Sh"
               class="border rounded-xl px-4 py-3">

        <select name="faculty" class="border rounded-xl px-4 py-3">
            <option value="">Fakultet</option>
            <option value="Kompyuter inginiring" {% if filters.faculty == "Kompyuter inginiring" %}selected{% endif %}>Kompyuter inginiring</option>
            <option value="Axborot texnologiyalar" {% if filters.faculty == "Axborot texnologiyalar" %}selected{% endif %}>Axborot texnologiyalar</option>
        </select>

        <input type="text" name="qabul_yili" value="{{ filters.qabul_yili }}"
               placeholder="Qabul yili"
               class="border rounded-xl px-4 py-3">

        <input type="text" name="group" value="{{ filters.group }}"
               placeholder="Guruh"
               class="border rounded-xl px-4 py-3">

        <button type="submit"
                class="bg-blue-600 text-white font-black rounded-xl px-6 py-3 hover:bg-blue-700">
            üîç Qidirish
        </button>
    </form>
</section>

<!-- ================= DESKTOP TABLE ================= -->
<section class="max-w-7xl mx-auto px-6 pt-12 hidden md:block">
    <div class="bg-white rounded-3xl shadow overflow-x-auto">
        <table class="min-w-full text-sm">
            <thead class="bg-slate-100 text-xs uppercase font-black text-slate-600">
                <tr>
                    <th class="px-4 py-3">‚Ññ</th>
                    <th class="px-4 py-3">F.I.Sh</th>
                    <th class="px-4 py-3">Qabul yili</th>
                    <th class="px-4 py-3">Fakultet</th>
                    <th class="px-4 py-3">Guruh</th>
                    <th class="px-4 py-3">Holat</th>
                </tr>
            </thead>
            <tbody class="divide-y">
                {% for talaba in talabalar %}
                <tr class="hover:bg-blue-50">
                    <td class="px-4 py-2 font-bold">
                        {{ forloop.counter0|add:page_obj.start_index }}
                    </td>
                    <td class="px-4 py-2">{{ talaba.full_name }}</td>
                    <td class="px-4 py-2 text-center">{{ talaba.qabul_yili }}</td>
                    <td class="px-4 py-2 text-center">{{ talaba.faculty }}</td>
                    <td class="px-4 py-2 text-center font-semibold text-blue-700">
                        {{ talaba.group }}
                    </td>
                    <td class="px-4 py-2 text-center">
                        <span class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-xs font-black">
                            {{ talaba.status }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center py-10 font-bold text-slate-500">
                        Talaba topilmadi
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>

<!-- ================= MOBILE CARDS ================= -->
<section class="max-w-7xl mx-auto px-6 pt-12 md:hidden space-y-4">
    {% for talaba in talabalar %}
    <div class="bg-white rounded-2xl shadow p-5">
        <h3 class="font-black text-lg text-blue-700">
            {{ talaba.full_name }}
        </h3>

        <div class="mt-2 text-sm space-y-1">
            <p><b>Fakultet:</b> {{ talaba.faculty }}</p>
            <p><b>Guruh:</b> {{ talaba.group }}</p>
            <p><b>Qabul yili:</b> {{ talaba.qabul_yili }}</p>
        </div>

        <div class="mt-3">
            <span class="inline-block px-3 py-1 text-xs rounded-full bg-emerald-100 text-emerald-700 font-bold">
                {{ talaba.status }}
            </span>
        </div>
    </div>
    {% endfor %}
</section>

<!-- ================= PAGINATION ================= -->
{% if page_obj.has_other_pages %}
<div class="flex justify-center mt-12">
    <div class="flex items-center gap-3">
        {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}&{{ filters.urlencode }}"
           class="px-4 py-2 bg-white border rounded-lg">‚¨Ö Oldingi</a>
        {% endif %}

        <span class="font-black">
            {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}&{{ filters.urlencode }}"
           class="px-4 py-2 bg-white border rounded-lg">Keyingi ‚û°</a>
        {% endif %}
    </div>
</div>
{% endif %}

<footer class="bg-slate-900 text-slate-400 py-6 mt-16 text-center text-xs font-bold">
    ¬© 2025 SamTUIT | Talabalar bo‚Äòlimi
</footer>

<script>
function toggleMenu() {
    document.getElementById('mobileMenu').classList.toggle('hidden');
}
</script>

</body>
</html>
